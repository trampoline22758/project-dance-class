{
  // Core Vercel config version
  "version": 2,

  // Serve "/about" instead of "/about.html" (nice, clean URLs)
  "cleanUrls": true,

  // Do not append trailing slashes ("/about" not "/about/")
  "trailingSlash": false,

  // ---------- Response headers ----------
  "headers": [
    // Long-cache immutable fonts (fingerprinted files are safe to cache for a year)
    {
      "source": "/(.*)\\.(woff2|woff|ttf|eot|otf)$",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    },

    // Long-cache immutable CSS/JS (works best if your build produces hashed filenames)
    {
      "source": "/(.*)\\.(css|js)$",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    },

    // Static images (30 days). If you use hashed images, you may switch to 1 year + immutable.
    {
      "source": "/(.*)\\.(png|jpg|jpeg|gif|webp|svg|ico|avif)$",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=2592000"
        } // 30 days
      ]
    },

    // HTML: always revalidate (so changes deploy instantly for visitors)
    {
      "source": "/(.*)\\.(html)$",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=0, must-revalidate"
        }
      ]
    },

    // PWA/manifest & service worker: never cache aggressively
    {
      "source": "/(manifest\\.webmanifest|site\\.webmanifest)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=0, must-revalidate"
        }
      ]
    },
    {
      "source": "/sw\\.js",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "no-store"
        }
      ]
    },

    // SEO files (robots/sitemap): reasonable short cache
    {
      "source": "/(robots\\.txt|sitemap\\.xml)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=86400"
        } // 1 day
      ]
    },

    // Security headers applied to all routes
    {
      "source": "/(.*)",
      "headers": [
        // Prevent the site from being framed (clickjacking protection)
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },

        // Block MIME sniffing
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },

        // Sensible referrer policy
        {
          "key": "Referrer-Policy",
          "value": "strict-origin-when-cross-origin"
        },

        // Lock down powerful APIs you don’t use
        {
          "key": "Permissions-Policy",
          "value": "camera=(), microphone=(), geolocation=()"
        },

        // HSTS for 2 years + preload (enable only if you serve HTTPS on apex + subdomains)
        {
          "key": "Strict-Transport-Security",
          "value": "max-age=63072000; includeSubDomains; preload"
        },

        // Cross-origin protections (safe defaults)
        {
          "key": "Cross-Origin-Opener-Policy",
          "value": "same-origin"
        },
        {
          "key": "Cross-Origin-Resource-Policy",
          "value": "same-site"
        },

        // Content Security Policy:
        // NOTE: This version removes 'unsafe-eval' and keeps 'unsafe-inline' because your pages use inline styles/scripts.
        // If you later move inline <script> to external files or use nonces/hashes, you can drop 'unsafe-inline' too.
        // The sources below are tailored to assets you’ve shown (fonts.googleapis, gstatic, cdnjs, unpkg, embed.im).
        // If something gets blocked, check your browser console and add the needed host.
        {
          "key": "Content-Security-Policy",
          "value": "default-src 'self'; frame-ancestors 'none'; img-src 'self' data: https:; font-src 'self' https://fonts.gstatic.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://unpkg.com https://app.embed.im; connect-src 'self' https://www.google-analytics.com https://www.googletagmanager.com"
        }
      ]
    }
  ],

  // ---------- Redirects ----------
  "redirects": [
    // Canonicalize “home” and “index.html” to root
    {
      "source": "/home",
      "destination": "/",
      "permanent": true
    },
    {
      "source": "/index.html",
      "destination": "/",
      "permanent": true
    },

    // Canonicalize any ".html" to clean URL (works well with `cleanUrls: true`)
    {
      "source": "/:path*.html",
      "destination": "/:path*",
      "permanent": true
    }

    // If you accidentally linked to an image for schedule, send users to the page
    // { "source": "/schedule.webp", "destination": "/schedule", "permanent": true }
  ]
}
